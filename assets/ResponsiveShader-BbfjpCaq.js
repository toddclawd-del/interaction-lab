import{V as i,j as d,z as P,u as T}from"./three-vendor-BRQK_L2F.js";import{r as n}from"./react-vendor-DWqy1xEj.js";const M=n.createContext({mouse:new i(.5,.5),scroll:0,isMobile:!1,isHovered:!1}),X=()=>n.useContext(M);function B(){const{gl:a,size:c}=T();return n.useEffect(()=>{a.setSize(c.width,c.height)},[a,c]),null}function F({children:a,className:c,style:p,trackMouse:v=!0,mobileInteraction:l="touch",frameloop:S="always",dpr:x=[1,2],pauseWhenHidden:w=!0,onMouseEnter:f,onMouseLeave:m}){const r=n.useRef(null),[b,u]=n.useState(new i(.5,.5)),[L,g]=n.useState(0),[h,R]=n.useState(!1),[y,E]=n.useState(!1),[C,j]=n.useState(!0);n.useEffect(()=>{R("ontouchstart"in window||navigator.maxTouchPoints>0)},[]),n.useEffect(()=>{if(!v)return;const e=t=>{if(!r.current)return;const s=r.current.getBoundingClientRect(),o=(t.clientX-s.left)/s.width,V=1-(t.clientY-s.top)/s.height;u(new i(Math.max(0,Math.min(1,o)),Math.max(0,Math.min(1,V))))};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[v]),n.useEffect(()=>{if(h){if(l==="scroll"){const e=()=>{const t=window.scrollY/(document.body.scrollHeight-window.innerHeight);g(t),u(new i(.5,t))};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)}if(l==="touch"){const e=t=>{if(!r.current)return;const s=r.current.getBoundingClientRect(),o=t.touches[0];o&&u(new i(Math.max(0,Math.min(1,(o.clientX-s.left)/s.width)),Math.max(0,Math.min(1,1-(o.clientY-s.top)/s.height))))};return window.addEventListener("touchmove",e,{passive:!0}),()=>window.removeEventListener("touchmove",e)}if(l==="tilt"){const e=t=>{const s=((t.gamma||0)+45)/90,o=((t.beta||0)+45)/90;u(new i(Math.max(0,Math.min(1,s)),Math.max(0,Math.min(1,o))))};return window.addEventListener("deviceorientation",e),()=>window.removeEventListener("deviceorientation",e)}}},[h,l]),n.useEffect(()=>{const e=()=>{const t=window.scrollY/(document.body.scrollHeight-window.innerHeight);g(Math.max(0,Math.min(1,t)))};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[]),n.useEffect(()=>{if(!w||!r.current)return;const e=new IntersectionObserver(([t])=>j(t.isIntersecting),{threshold:.1});return e.observe(r.current),()=>e.disconnect()},[w]);const H=()=>{E(!0),f==null||f()},Y=()=>{E(!1),m==null||m()},z=w&&!C?"never":S;return d.jsx(M.Provider,{value:{mouse:b,scroll:L,isMobile:h,isHovered:y},children:d.jsx("div",{ref:r,className:c,style:{width:"100%",height:"100%",...p},onMouseEnter:H,onMouseLeave:Y,children:d.jsxs(P,{frameloop:z,dpr:h?Math.min(x,1.5):x,gl:{antialias:!0,alpha:!0,powerPreference:"high-performance"},style:{width:"100%",height:"100%"},children:[d.jsx(B,{}),a]})})})}export{F as R,X as u};
