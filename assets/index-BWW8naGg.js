import{j as x}from"./three-vendor-kjlaQlG4.js";import{r as n,L as J}from"./react-vendor-DWqy1xEj.js";import{g as Q}from"./gsap-vendor-C8pce-KX.js";const h={MAX_ROTATION:28,MAX_DEPTH:140,MIN_SCALE:.8,SCALE_RANGE:.2,CARD_WIDTH:280,CARD_HEIGHT:380,GAP:28,FRICTION:.92,WHEEL_SENS:.6,DRAG_SENS:1.2,BG_BLUR:32,GRADIENT_TRANSITION:800},U=["https://picsum.photos/seed/carousel1/600/800","https://picsum.photos/seed/carousel2/600/800","https://picsum.photos/seed/carousel3/600/800","https://picsum.photos/seed/carousel4/600/800","https://picsum.photos/seed/carousel5/600/800","https://picsum.photos/seed/carousel6/600/800","https://picsum.photos/seed/carousel7/600/800","https://picsum.photos/seed/carousel8/600/800"];function Z(l){const b=l.naturalWidth&&l.naturalHeight?l.naturalWidth/l.naturalHeight:1,c=b>=1?48:Math.max(16,Math.round(48*b)),p=b>=1?Math.max(16,Math.round(48/b)):48,v=document.createElement("canvas");v.width=c,v.height=p;const d=v.getContext("2d");if(!d)return{primary:{r:100,g:100,b:150},secondary:{r:150,g:100,b:100}};d.drawImage(l,0,0,c,p);const a=d.getImageData(0,0,c,p).data,y=[],A=(Math.floor(p/2)*c+Math.floor(c/2))*4;y.push({r:a[A],g:a[A+1],b:a[A+2]}),[0,(c-1)*4,(p-1)*c*4,((p-1)*c+c-1)*4].forEach(R=>{y.push({r:a[R],g:a[R+1],b:a[R+2]})});const I=y.reduce((R,C)=>({r:R.r+C.r/y.length,g:R.g+C.g/y.length,b:R.b+C.b/y.length}),{r:0,g:0,b:0}),M=Math.floor(c/4)*4,_={r:a[M],g:a[M+1],b:a[M+2]};return{primary:{r:Math.round(I.r),g:Math.round(I.g),b:Math.round(I.b)},secondary:_}}function ee(l,m){const b=Math.max(-1,Math.min(1,l/m)),p=1-Math.abs(b),v=-b*h.MAX_ROTATION,d=p*h.MAX_DEPTH,a=h.MIN_SCALE+p*h.SCALE_RANGE;return{transform:`translate3d(${l}px, -50%, ${d}px) rotateY(${v}deg) scale(${a})`,z:d}}function te(l,m){return(l%m+m)%m}function oe(){const l=n.useRef(null),m=n.useRef(null),b=n.useRef(null),c=n.useRef([]),p=n.useRef([]),v=n.useRef(0),d=n.useRef(0),a=n.useRef(0),y=n.useRef(0),A=n.useRef(0),D=n.useRef(!1),I=n.useRef(0),M=n.useRef({r1:100,g1:100,b1:150,r2:150,g2:100,b2:100,x1:.3,y1:.3,x2:.7,y2:.7}),[_,R]=n.useState(!0),[C,Y]=n.useState(window.innerWidth*.5),k=h.CARD_WIDTH+h.GAP,T=U.length*k,z=n.useCallback(()=>{const e=m.current;if(!e)return;const t=e.getContext("2d");if(!t)return;const s=e.width,u=e.height,o=M.current;t.fillStyle="#f6f7f9",t.fillRect(0,0,s,u);const r=Date.now()*3e-4,g=Math.sin(r)*.1,i=Math.cos(r*.8)*.1,L=Math.cos(r*1.2)*.1,f=Math.sin(r*.9)*.1,S=(o.x1+g)*s,E=(o.y1+i)*u,K=Math.max(s,u)*.6,j=t.createRadialGradient(S,E,0,S,E,K);j.addColorStop(0,`rgba(${o.r1}, ${o.g1}, ${o.b1}, 0.7)`),j.addColorStop(1,"rgba(255, 255, 255, 0)"),t.fillStyle=j,t.fillRect(0,0,s,u);const B=(o.x2+L)*s,F=(o.y2+f)*u,V=Math.max(s,u)*.5,$=t.createRadialGradient(B,F,0,B,F,V);$.addColorStop(0,`rgba(${o.r2}, ${o.g2}, ${o.b2}, 0.5)`),$.addColorStop(1,"rgba(255, 255, 255, 0)"),t.fillStyle=$,t.fillRect(0,0,s,u)},[]),P=n.useCallback(()=>{const e=c.current,t=v.current,s=T/2;let u=0,o=1/0;e.forEach((r,g)=>{let i=r.x-t;i<-s&&(i+=T),i>s&&(i-=T);const{transform:L,z:f}=ee(i,C);r.el.style.transform=L,r.el.style.zIndex=String(Math.round(f));const S=Math.abs(i);S<o&&(o=S,u=g)}),u!==A.current&&(A.current=u,q(u))},[T,C]),q=n.useCallback(e=>{const t=p.current[e];if(!t)return;const s=M.current;Q.to(s,{r1:t.primary.r,g1:t.primary.g,b1:t.primary.b,r2:t.secondary.r,g2:t.secondary.g,b2:t.secondary.b,duration:h.GRADIENT_TRANSITION/1e3,ease:"power2.out"})},[]),G=n.useCallback(e=>{const t=y.current?(e-y.current)/1e3:0;y.current=e,v.current=te(v.current+d.current*t,T);const s=Math.pow(h.FRICTION,t*60);d.current*=s,Math.abs(d.current)<.5&&(d.current=0),P(),z(),a.current=requestAnimationFrame(G)},[T,P,z]),X=n.useCallback(e=>{e.preventDefault();const t=Math.abs(e.deltaX)>Math.abs(e.deltaY)?e.deltaX:e.deltaY;d.current+=t*h.WHEEL_SENS*20},[]),H=n.useCallback(e=>{D.current=!0,I.current=e.clientX,e.target.setPointerCapture(e.pointerId)},[]),O=n.useCallback(e=>{if(!D.current)return;const t=e.clientX-I.current;I.current=e.clientX,d.current-=t*h.DRAG_SENS*60},[]),N=n.useCallback(()=>{D.current=!1},[]),W=n.useCallback(()=>{const e=m.current;e&&(e.width=window.innerWidth,e.height=window.innerHeight),Y(window.innerWidth*.5)},[]);return n.useEffect(()=>{const e=l.current,t=b.current,s=m.current;return!e||!t||!s?void 0:(s.width=window.innerWidth,s.height=window.innerHeight,(async()=>{const o=[],r=[];if(await Promise.all(U.map((g,i)=>new Promise(L=>{const f=new Image;f.crossOrigin="anonymous",f.onload=()=>{const S=Z(f);r[i]=S;const E=document.createElement("article");E.className="gradient-carousel__card",E.style.cssText=`
              position: absolute;
              top: 50%;
              left: 50%;
              width: ${h.CARD_WIDTH}px;
              height: ${h.CARD_HEIGHT}px;
              transform-style: preserve-3d;
              backface-visibility: hidden;
              contain: layout paint;
              transform-origin: center center;
              cursor: grab;
              border-radius: 16px;
              overflow: hidden;
              box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            `,f.style.cssText=`
              width: 100%;
              height: 100%;
              object-fit: cover;
              pointer-events: none;
              user-select: none;
            `,f.draggable=!1,E.appendChild(f),t.appendChild(E),o[i]={el:E,x:i*k,img:f},L()},f.onerror=()=>{r[i]={primary:{r:100+i*20,g:100,b:150},secondary:{r:150,g:100+i*20,b:100}},L()},f.src=g}))),c.current=o.filter(Boolean),p.current=r,r[0]){const g=M.current;g.r1=r[0].primary.r,g.g1=r[0].primary.g,g.b1=r[0].primary.b,g.r2=r[0].secondary.r,g.g2=r[0].secondary.g,g.b2=r[0].secondary.b}R(!1),a.current=requestAnimationFrame(G)})(),e.addEventListener("wheel",X,{passive:!1}),e.addEventListener("pointerdown",H),e.addEventListener("pointermove",O),e.addEventListener("pointerup",N),e.addEventListener("pointercancel",N),window.addEventListener("resize",W),()=>{cancelAnimationFrame(a.current),e.removeEventListener("wheel",X),e.removeEventListener("pointerdown",H),e.removeEventListener("pointermove",O),e.removeEventListener("pointerup",N),e.removeEventListener("pointercancel",N),window.removeEventListener("resize",W)})},[k,G,X,H,O,N,W]),x.jsxs("div",{style:w.container,children:[x.jsx(J,{to:"/",style:w.backButton,children:"‚Üê Back"}),x.jsxs("main",{ref:l,style:w.stage,children:[x.jsx("canvas",{ref:m,style:w.canvas,"aria-hidden":"true"}),x.jsx("section",{ref:b,style:w.cards,"aria-label":"Infinite image carousel"}),_&&x.jsx("div",{style:w.loader,children:x.jsx("div",{style:w.loaderSpinner})})]}),x.jsx("div",{style:w.instructions,children:"Drag or scroll to navigate"}),x.jsx("div",{style:w.branding,children:"GRADIENT CAROUSEL"}),x.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}const w={container:{width:"100%",height:"100vh",overflow:"hidden",background:"#f6f7f9",fontFamily:"'Inter', system-ui, sans-serif",position:"relative"},stage:{position:"relative",width:"100%",height:"100%",perspective:"1800px",overflow:"hidden",cursor:"grab"},canvas:{position:"absolute",inset:0,width:"100%",height:"100%",filter:`blur(${h.BG_BLUR}px) saturate(1.1)`,pointerEvents:"none"},cards:{position:"absolute",inset:0,transformStyle:"preserve-3d"},backButton:{position:"fixed",top:24,left:24,color:"rgba(0, 0, 0, 0.4)",textDecoration:"none",fontSize:14,fontWeight:500,zIndex:100,transition:"color 0.2s ease",mixBlendMode:"multiply"},branding:{position:"fixed",top:24,right:24,color:"rgba(0, 0, 0, 0.2)",fontFamily:"monospace",fontSize:10,letterSpacing:"0.1em",pointerEvents:"none",userSelect:"none"},instructions:{position:"fixed",bottom:32,left:"50%",transform:"translateX(-50%)",color:"rgba(0, 0, 0, 0.4)",fontSize:14,fontWeight:400,letterSpacing:"0.02em",pointerEvents:"none"},loader:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(246, 247, 249, 0.9)",zIndex:50},loaderSpinner:{width:40,height:40,border:"3px solid rgba(0,0,0,0.1)",borderTopColor:"rgba(0,0,0,0.4)",borderRadius:"50%",animation:"spin 0.8s linear infinite"}};export{oe as GradientCarousel,oe as default};
